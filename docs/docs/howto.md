# xscript如何工作

# 定义
xscript是一门类似于TCL的命令语言.

- - -

下面的一些词在xscript中有特定的意思.

> 以下所有的函数和变量都在`core.XScriptInterpreter`中

## 块(block)
块是一组代码, 以块开始符(如`for`)开始,以`end`命令结束.

在`block`中记录了当前代码行所处的块.

## 变量代换符($, #, .)
美元符号(`$`), 井号(`#`), 和英文句号(`.`)都是变量代换符, 分别将变量转换为各种数据类型. 使用`replacevar`函数来替换在`var`中的变量.

- `&`: 保持原来变量类型
- `$`: 转换为str类型
- `#`: 转换为int类型
- `.`: 转换为float类型

> 当转换失败, 会返回`$NULL$`.

## 命令替换符(\[...\])
`[`和`]`是成对的命令替换符,使用`replacefunction`来替换.

命令替换符**仅仅**支持如下命令:

- gets
- xscript.

## xscript.
`xscript.`命令使用xscript函数来支持函数通过路径获取的功能, 支持获得函数和变量.

其间使用了一个`for`循环来遍历`lib`库的应用位置.

> 在获取变量值的时候不能向`xscript`传递参数, 以免引起`... is not callable`错误
